<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FurniCraft - Furniture Templates</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      min-height: 100vh;
      color: #2c3e50;
      line-height: 1.6;
    }

    /* Professional Header */
    header {
      background: linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%);
      color: white;
      padding: 1.5rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.5rem;
      font-weight: 600;
      font-family: 'Playfair Display', serif;
      box-shadow: 0 4px 20px rgba(139, 69, 19, 0.3);
      position: relative;
    }

    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="wood" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect width="20" height="20" fill="%23A0522D"/><path d="M0,10 Q5,8 10,10 T20,10" stroke="%23D2691E" stroke-width="0.5" fill="none"/><path d="M0,15 Q5,13 10,15 T20,15" stroke="%23CD853F" stroke-width="0.3" fill="none"/></pattern></defs><rect width="100" height="100" fill="url(%23wood)"/></svg>');
      opacity: 0.1;
      pointer-events: none;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.8rem;
    }

    .logo::before {
      content: 'ü™ë';
      font-size: 2rem;
    }

    #user {
      background: rgba(255, 255, 255, 0.2);
      padding: 0.5rem 1rem;
      border-radius: 25px;
      font-size: 0.9rem;
      backdrop-filter: blur(10px);
    }

    /* Main Content */
    main {
      padding: 3rem 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .page-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .page-header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      color: #8B4513;
      margin-bottom: 1rem;
    }

    .page-header p {
      font-size: 1.1rem;
      color: #6c757d;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Templates Grid */
    .templates-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .template-card {
      background: linear-gradient(145deg, #ffffff, #f8f9fa);
      border-radius: 20px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      border: 1px solid rgba(139, 69, 19, 0.1);
      position: relative;
      overflow: hidden;
    }

    .template-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #8B4513, #CD853F, #A0522D);
      transform: scaleX(0);
      transition: transform 0.4s ease;
    }

    .template-card:hover::before {
      transform: scaleX(1);
    }

    .template-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(139, 69, 19, 0.15), 0 15px 25px rgba(0, 0, 0, 0.1);
      border-color: rgba(139, 69, 19, 0.2);
    }

    .template-card.selected {
      border-color: #8B4513;
      box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.3);
    }

    .template-image {
      width: 200px;
      height: 200px;
      margin: 0 auto 1.5rem;
      border-radius: 15px;
      overflow: hidden;
      border: 2px solid #8B4513;
    }

    .template-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .template-card h2 {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 1rem;
    }

    .template-card p {
      color: #6c757d;
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }

    .template-radio {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 20px;
      height: 20px;
      accent-color: #8B4513;
    }

    /* Action Buttons */
    .action-buttons {
      display: none;
      justify-content: center;
      gap: 2rem;
      margin-top: 2rem;
      padding: 2rem;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(139, 69, 19, 0.1);
    }

    .action-btn {
      background: linear-gradient(135deg, #8B4513, #CD853F);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 25px;
      font-weight: 600;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .action-btn:hover {
      background: linear-gradient(135deg, #A0522D, #D2691E);
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(139, 69, 19, 0.3);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      header {
        padding: 1rem;
        font-size: 1.2rem;
      }

      main {
        padding: 2rem 1rem;
      }

      .templates-grid {
        grid-template-columns: 1fr;
      }

      .action-buttons {
        flex-direction: column;
        gap: 1rem;
      }
    }

    /* Animations */
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <header>
    <div style="display: flex; align-items: center;">
      <button onclick="window.history.back()" style="background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; margin-right: 1rem;">‚Üê Back</button>
      <div class="logo">FurniCraft</div>
    </div>
    <span id="user">Welcome!</span>
  </header>

  <main>
    <div class="page-header">
      <h1>Furniture Templates</h1>
      <p>Browse our collection of ready-to-use furniture templates. Select one to customize and bring your vision to life.</p>
    </div>

    <div class="templates-grid" id="templatesGrid">
      <!-- Templates will be populated by JavaScript -->
    </div>

    <div class="action-buttons" id="actionButtons">
      <button class="action-btn" onclick="saveAsPNG()">
        <i class="fas fa-download"></i> Save as PNG
      </button>
      <button class="action-btn" onclick="sendToShop()">
        <i class="fas fa-store"></i> Send to Furniture Shop
      </button>
    </div>
  </main>

  <script>
    // Set user name from session storage
    const userName = sessionStorage.getItem('username');
    if (userName) {
      document.getElementById('user').textContent = `Welcome, ${userName}!`;
    }

    // Template data
    const templates = [
      {
        id: 1,
        name: "Classic Wooden Chair",
        type: "chair",
        description: "A timeless wooden chair perfect for dining rooms or offices.",
        image: "images/chair.jpg"
      },
      {
        id: 2,
        name: "Modern Dining Table",
        type: "table",
        description: "Elegant dining table with clean lines and sturdy construction.",
        image: "images/table.jpg"
      },
      {
        id: 3,
        name: "Comfortable Sofa",
        type: "sofa",
        description: "Plush sofa designed for ultimate comfort and style.",
        image: "images/sofa.jpg"
      },
      {
        id: 4,
        name: "Storage Cabinet",
        type: "cabinet",
        description: "Versatile cabinet with ample storage space.",
        image: "images/cabinet.jpg"
      },
      {
        id: 5,
        name: "Queen Size Bed",
        type: "bed",
        description: "Comfortable bed frame with elegant headboard.",
        image: "images/bed.jpg"
      },
      {
        id: 6,
        name: "Bookshelf Unit",
        type: "bookshelf",
        description: "Tall bookshelf perfect for organizing your library.",
        image: "images/bookshelf.jpg"
      },
      {
        id: 7,
        name: "Office Desk",
        type: "desk",
        description: "Functional desk with drawers for office productivity.",
        image: "images/desk.jpg"
      },
      {
        id: 8,
        name: "Bar Stool",
        type: "stool",
        description: "Stylish bar stool with comfortable seating.",
        image: "images/stool.jpg"
      }
    ];

    let selectedTemplate = null;

    // Load templates
    function loadTemplates() {
      const grid = document.getElementById('templatesGrid');
      grid.innerHTML = '';
      templates.forEach(template => {
        const card = document.createElement('div');
        card.className = 'template-card fade-in';
        card.innerHTML = `
          <input type="radio" name="template" class="template-radio" value="${template.id}" onchange="selectTemplate(${template.id})">
          <div class="template-image">
            <img src="${template.image}" alt="${template.name}">
          </div>
          <h2>${template.name}</h2>
          <p>${template.description}</p>
        `;
        grid.appendChild(card);
      });
    }

    // Select template
    function selectTemplate(id) {
      selectedTemplate = templates.find(t => t.id === id);
      document.querySelectorAll('.template-card').forEach(card => {
        card.classList.remove('selected');
      });
      const selectedRadio = document.querySelector(`input[value="${id}"]`);
      selectedRadio.closest('.template-card').classList.add('selected');
      document.getElementById('actionButtons').style.display = 'flex';
    }

    // Save as PNG
    function saveAsPNG() {
      if (!selectedTemplate) return;
      const selectedCard = document.querySelector('.template-card.selected');
      html2canvas(selectedCard).then(canvas => {
        const link = document.createElement('a');
        link.download = `${selectedTemplate.name.replace(/\s+/g, '_')}.png`;
        link.href = canvas.toDataURL('image/png');
        link.click();
      }).catch(error => {
        console.error('Error generating PNG:', error);
        alert('Failed to generate PNG. Please try again.');
      });
    }

    // Send to furniture shop
    function sendToShop() {
      if (!selectedTemplate) return;
      // Store selected template in session storage
      sessionStorage.setItem('selectedTemplate', JSON.stringify(selectedTemplate));
      // Redirect to shop page
      window.location.href = 'shop.html';
    }

    // Initialize
    loadTemplates();
  </script>
</body>
</html>
