<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FurniCraft - Furniture Shops</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      min-height: 100vh;
      color: #2c3e50;
      line-height: 1.6;
    }

    /* Professional Header */
    header {
      background: linear-gradient(135deg, #8B4513 0%, #A0522D 50%, #CD853F 100%);
      color: white;
      padding: 1.5rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1.5rem;
      font-weight: 600;
      font-family: 'Playfair Display', serif;
      box-shadow: 0 4px 20px rgba(139, 69, 19, 0.3);
      position: relative;
    }

    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="wood" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect width="20" height="20" fill="%23A0522D"/><path d="M0,10 Q5,8 10,10 T20,10" stroke="%23D2691E" stroke-width="0.5" fill="none"/><path d="M0,15 Q5,13 10,15 T20,15" stroke="%23CD853F" stroke-width="0.3" fill="none"/></pattern></defs><rect width="100" height="100" fill="url(%23wood)"/></svg>');
      opacity: 0.1;
      pointer-events: none;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.8rem;
    }

    .logo::before {
      content: 'ü™ë';
      font-size: 2rem;
    }

    #user {
      background: rgba(255, 255, 255, 0.2);
      padding: 0.5rem 1rem;
      border-radius: 25px;
      font-size: 0.9rem;
      backdrop-filter: blur(10px);
    }

    /* Main Content */
    main {
      padding: 3rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .page-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .page-header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 2.5rem;
      color: #8B4513;
      margin-bottom: 1rem;
    }

    .page-header p {
      font-size: 1.1rem;
      color: #6c757d;
      max-width: 600px;
      margin: 0 auto;
    }

    .review-btn {
      background: #28a745;
      color: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .review-btn:hover {
      background: #218838;
      transform: scale(1.05);
    }

    /* Shop List */
    .shop-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .shop-card {
      background: linear-gradient(145deg, #ffffff, #f8f9fa);
      border-radius: 20px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      border: 1px solid rgba(139, 69, 19, 0.1);
      position: relative;
      overflow: hidden;
    }

    .shop-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #8B4513, #CD853F, #A0522D);
      transform: scaleX(0);
      transition: transform 0.4s ease;
    }

    .shop-card:hover::before {
      transform: scaleX(1);
    }

    .shop-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(139, 69, 19, 0.15), 0 15px 25px rgba(0, 0, 0, 0.1);
      border-color: rgba(139, 69, 19, 0.2);
    }

    .shop-image {
      width: 120px;
      height: 120px;
      margin: 0 auto 1.5rem;
      background: linear-gradient(135deg, #8B4513, #CD853F);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      color: white;
      transition: all 0.3s ease;
    }

    .shop-card:hover .shop-image {
      transform: scale(1.1) rotate(5deg);
      background: linear-gradient(135deg, #A0522D, #D2691E);
    }

    .shop-card h2 {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 1rem;
    }

    .shop-card p {
      color: #6c757d;
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .shop-rating {
      color: #8B4513;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .select-shop-btn {
      background: linear-gradient(135deg, #8B4513, #CD853F);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .select-shop-btn:hover {
      background: linear-gradient(135deg, #A0522D, #D2691E);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
    }

    /* Chat Interface */
    .chat-container {
      display: none;
      background: white;
      border-radius: 20px;
      padding: 2rem;
      border: 1px solid rgba(139, 69, 19, 0.1);
      box-shadow: 0 10px 30px rgba(139, 69, 19, 0.1);
      max-width: 800px;
      margin: 0 auto;
    }

    .chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #dee2e6;
    }

    .chat-header h2 {
      font-family: 'Playfair Display', serif;
      color: #8B4513;
      margin: 0;
    }

    .back-btn {
      background: #6c757d;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .back-btn:hover {
      background: #5a6268;
    }

    .chat-messages {
      height: 400px;
      overflow-y: auto;
      border: 1px solid #dee2e6;
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
      background: #f8f9fa;
    }

    .message {
      margin-bottom: 1rem;
      padding: 0.5rem;
      border-radius: 10px;
      max-width: 70%;
    }

    .message.user {
      background: #8B4513;
      color: white;
      margin-left: auto;
      text-align: right;
    }

    .message.shop {
      background: #e9ecef;
      color: #2c3e50;
    }

    .message img, .message .file-link {
      max-width: 200px;
      max-height: 200px;
      border-radius: 10px;
      margin-top: 0.5rem;
    }

    .chat-inputs {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    .chat-input {
      flex: 1;
      padding: 0.75rem;
      border: 1px solid #dee2e6;
      border-radius: 25px;
      font-size: 1rem;
    }

    .file-input {
      display: none;
    }

    .file-btn, .call-btn, .send-btn {
      background: #8B4513;
      color: white;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1.2rem;
    }

    .file-btn:hover, .call-btn:hover, .send-btn:hover {
      background: #A0522D;
      transform: scale(1.1);
    }

    .send-btn {
      border-radius: 25px;
      padding: 0.75rem 1.5rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      main {
        padding: 2rem 1rem;
      }

      .shop-list {
        grid-template-columns: 1fr;
      }

      .chat-inputs {
        flex-direction: column;
      }

      .chat-input {
        width: 100%;
      }
    }

    /* Search and Nearest */
    .search-container {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .search-input {
      padding: 0.75rem 1rem;
      border: 1px solid #dee2e6;
      border-radius: 25px;
      font-size: 1rem;
      width: 300px;
      max-width: 100%;
    }

    .nearest-btn {
      background: linear-gradient(135deg, #8B4513, #CD853F);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .nearest-btn:hover {
      background: linear-gradient(135deg, #A0522D, #D2691E);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
    }

    /* Review Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 20px;
      text-align: center;
      max-width: 400px;
      width: 90%;
    }

    .stars {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin: 1rem 0;
    }

    .star {
      font-size: 2rem;
      color: #ddd;
      cursor: pointer;
      transition: color 0.3s;
    }

    .star.selected {
      color: #FFD700;
    }

    /* Animations */
    .fade-in {
      animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <header>
    <div style="display: flex; align-items: center;">
      <button onclick="window.history.back()" style="background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; margin-right: 1rem;">‚Üê Back</button>
      <div class="logo">FurniCraft</div>
    </div>
    <span id="user">Welcome!</span>
  </header>

  <main>
    <div class="page-header">
      <h1>Select a Furniture Shop</h1>
      <p>Choose a shop to send your customized order and start chatting with them.</p>
    </div>

    <div class="search-container">
      <input type="text" id="searchInput" class="search-input" placeholder="Search furniture shops..." oninput="searchShops()">
      <button class="nearest-btn" onclick="suggestNearestShops()">Suggest Nearest Shops</button>
    </div>

    <div id="shopList" class="shop-list">
      <!-- Shops will be populated by JavaScript -->
    </div>

    <div id="chatContainer" class="chat-container">
      <div class="chat-header">
        <h2 id="chatShopName">Shop Chat</h2>
        <button class="back-btn" onclick="backToShops()">Back to Shops</button>
      </div>
      <div id="chatMessages" class="chat-messages">
        <!-- Messages will be populated here -->
      </div>
      <div class="chat-inputs">
        <input type="text" id="messageInput" class="chat-input" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
        <input type="file" id="fileInput" class="file-input" accept="image/*,.pdf,.doc,.docx">
        <button class="file-btn" onclick="document.getElementById('fileInput').click()"><i class="fas fa-paperclip"></i></button>
        <button class="call-btn" onclick="startCall()"><i class="fas fa-phone"></i></button>
        <button class="send-btn" onclick="sendMessage()">Send</button>
        <button class="review-btn" onclick="openReviewModal()">Rate Shop</button>
      </div>
    </div>
  </main>

  <div id="reviewModal" class="modal">
    <div class="modal-content">
      <h3>Rate Shop</h3>
      <div class="stars">
        <span class="star" data-rating="1">‚òÖ</span>
        <span class="star" data-rating="2">‚òÖ</span>
        <span class="star" data-rating="3">‚òÖ</span>
        <span class="star" data-rating="4">‚òÖ</span>
        <span class="star" data-rating="5">‚òÖ</span>
      </div>
      <button onclick="submitReview()">Submit</button>
      <button onclick="closeReviewModal()">Cancel</button>
    </div>
  </div>

  <!-- Project Proposal Modal -->
  <div id="projectModal" class="modal">
    <div class="modal-content">
      <h3>Send Project Proposal</h3>
      <form id="projectForm">
        <textarea id="projectDescription" placeholder="Describe your project..." required rows="4"></textarea>
        <input type="file" id="projectFile" accept="image/*,.pdf,.doc,.docx">
        <input type="number" id="projectDuration" placeholder="Estimated duration (days)" min="1" required>
        <button type="submit">Send Proposal</button>
        <button type="button" onclick="closeProjectModal()">Cancel</button>
      </form>
    </div>
  </div>

  <script>
    // Set user name from session storage
    const userName = sessionStorage.getItem('username');
    if (userName) {
      document.getElementById('user').textContent = `Welcome, ${userName}!`;
    }

    // Review modal logic
    const reviewModal = document.getElementById('reviewModal');
    const stars = document.querySelectorAll('.star');
    let selectedRating = 0;

    function openReviewModal() {
      if (!selectedShop) {
        alert('Please select a shop first to rate.');
        return;
      }
      reviewModal.style.display = 'flex';
      clearStars();
    }

    function closeReviewModal() {
      reviewModal.style.display = 'none';
    }

    stars.forEach(star => {
      star.addEventListener('click', () => {
        selectedRating = parseInt(star.getAttribute('data-rating'));
        updateStars(selectedRating);
      });
    });

    function updateStars(rating) {
      stars.forEach(star => {
        if (parseInt(star.getAttribute('data-rating')) <= rating) {
          star.classList.add('selected');
        } else {
          star.classList.remove('selected');
        }
      });
    }

    function clearStars() {
      selectedRating = 0;
      stars.forEach(star => star.classList.remove('selected'));
    }

    function submitReview() {
      if (selectedRating === 0) {
        alert('Please select a rating before submitting.');
        return;
      }
      // Add rating to the selected shop's reviews
      if (!selectedShop.reviews) {
        selectedShop.reviews = [];
      }
      selectedShop.reviews.push(selectedRating);
      // Recalculate average rating
      selectedShop.rating = selectedShop.reviews.reduce((a,b) => a + b, 0) / selectedShop.reviews.length;
      // Save updated shops to localStorage
      localStorage.setItem('shops', JSON.stringify(shops));
      // Update shop list display
      loadShops();
      closeReviewModal();
      alert(`Thank you for rating ${selectedShop.name} with ${selectedRating} stars!`);
    }

    // Close modal when clicking outside content
    window.addEventListener('click', (event) => {
      if (event.target === reviewModal) {
        closeReviewModal();
      }
    });

    // Shop data
    const defaultShops = [
      {
        id: 1,
        name: "WoodCraft Masters",
        location: "Downtown, City Center",
        lat: 40.7128,
        lng: -74.0060,
        reviews: [5,4,5,5],
        description: "Specializing in premium wood furniture with 20+ years experience.",
        yearsInBusiness: 22,
        detailedDescription: "WoodCraft Masters has been crafting high-quality wooden furniture since 2002. We specialize in custom-made pieces using sustainably sourced hardwoods. Our team of master craftsmen combines traditional techniques with modern design to create timeless furniture that lasts generations. From dining sets to bedroom suites, we handle every project with precision and care."
      },
      {
        id: 2,
        name: "Modern Furnishings Co.",
        location: "Uptown District",
        lat: 40.7589,
        lng: -73.9851,
        reviews: [4,5,4,5],
        description: "Contemporary designs with sustainable materials.",
        yearsInBusiness: 15,
        detailedDescription: "Modern Furnishings Co. was established in 2009 with a vision to bring contemporary furniture design to the forefront. We use eco-friendly materials and innovative manufacturing processes to create stylish, durable pieces. Our showroom features the latest trends in modern furniture, and our design team works closely with clients to bring their unique visions to life."
      },
      {
        id: 3,
        name: "Classic Carpentry",
        location: "Old Town",
        lat: 40.7505,
        lng: -73.9934,
        reviews: [5,5,5,4],
        description: "Traditional craftsmanship with modern techniques.",
        yearsInBusiness: 35,
        detailedDescription: "Founded in 1989, Classic Carpentry has been preserving the art of traditional woodworking while embracing modern innovations. Our experienced artisans create furniture that blends classic elegance with contemporary functionality. We specialize in restoration work and custom reproductions of antique pieces, ensuring that each item meets our exacting standards of quality and craftsmanship."
      },
      {
        id: 4,
        name: "EcoWood Creations",
        location: "Green Valley",
        lat: 40.7282,
        lng: -73.7949,
        reviews: [5,4,5,4],
        description: "Eco-friendly furniture made from recycled materials.",
        yearsInBusiness: 12,
        detailedDescription: "EcoWood Creations opened its doors in 2012 with a commitment to environmental sustainability. We transform reclaimed wood and recycled materials into beautiful, functional furniture. Our zero-waste approach ensures that every piece we create contributes to a greener planet. From upcycled pallets to salvaged barn wood, we give new life to materials that would otherwise end up in landfills."
      },
      {
        id: 5,
        name: "Urban Furniture Hub",
        location: "Midtown East",
        lat: 40.7580,
        lng: -73.9855,
        reviews: [4,4,5],
        description: "Modern urban furniture for city dwellers.",
        yearsInBusiness: 8,
        detailedDescription: "Urban Furniture Hub was launched in 2016 to cater to the unique needs of urban living. Our compact, multifunctional designs maximize space without compromising on style. We specialize in apartment-sized furniture that combines practicality with contemporary aesthetics. Our in-house designers stay ahead of urban living trends to offer solutions for small spaces and busy lifestyles."
      },
      {
        id: 6,
        name: "Heritage Woodworks",
        location: "Brooklyn Heights",
        lat: 40.6501,
        lng: -73.9496,
        reviews: [5,5,4,5],
        description: "Heritage-inspired wood furniture with a modern twist.",
        yearsInBusiness: 28,
        detailedDescription: "Established in 1996, Heritage Woodworks honors traditional woodworking heritage while incorporating modern design elements. Our craftsmen draw inspiration from historical furniture pieces, adapting classic forms for contemporary use. We use time-honored joinery techniques and finish our pieces with natural oils and waxes. Each item tells a story of craftsmanship passed down through generations."
      }
    ];

    let shops = JSON.parse(localStorage.getItem('shops')) || defaultShops.map(shop => ({...shop, rating: shop.reviews.reduce((a,b)=>a+b,0)/shop.reviews.length}));

    let selectedShop = null;
    let messages = {};

    // Load shops
    function loadShops(filteredShops = null) {
      const shopList = document.getElementById('shopList');
      shopList.innerHTML = '';
      const list = filteredShops || shops;
      list.forEach(shop => {
        shop.rating = shop.reviews.length ? shop.reviews.reduce((a,b)=>a+b,0)/shop.reviews.length : 0;
        const shopCard = document.createElement('div');
        shopCard.className = 'shop-card fade-in';
        shopCard.innerHTML = `
          <div class="shop-image">üè™</div>
          <h2>${shop.name}</h2>
          <p>${shop.description}</p>
          <div class="shop-rating">‚≠ê ${shop.rating.toFixed(1)}/5</div>
          <p><i class="fas fa-map-marker-alt"></i> ${shop.location}</p>
          <button class="select-shop-btn" onclick="selectShop(${shop.id})">Select Shop</button>
        `;
        shopList.appendChild(shopCard);
      });
    }

    // Search shops
    function searchShops() {
      const query = document.getElementById('searchInput').value.toLowerCase();
      const filtered = shops.filter(shop =>
        shop.name.toLowerCase().includes(query) ||
        shop.location.toLowerCase().includes(query) ||
        shop.description.toLowerCase().includes(query)
      );
      loadShops(filtered);
    }

    // Suggest nearest shops
    function suggestNearestShops() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
          const userLat = position.coords.latitude;
          const userLng = position.coords.longitude;
          const sorted = shops.slice().sort((a, b) => {
            const distA = getDistance(userLat, userLng, a.lat, a.lng);
            const distB = getDistance(userLat, userLng, b.lat, b.lng);
            return distA - distB;
          });
          loadShops(sorted.slice(0, 3)); // Show top 3 nearest
        }, () => {
          alert('Unable to get your location. Please allow location access.');
        });
      } else {
        alert('Geolocation is not supported by this browser.');
      }
    }

    // Calculate distance between two points
    function getDistance(lat1, lng1, lat2, lng2) {
      const R = 6371; // Radius of the Earth in km
      const dLat = (lat2 - lat1) * Math.PI / 180;
      const dLng = (lng2 - lng1) * Math.PI / 180;
      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLng/2) * Math.sin(dLng/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      return R * c;
    }

    // Select shop
    function selectShop(shopId) {
      window.location.href = 'details.html?shop=' + shopId;
    }

    // Back to shops
    function backToShops() {
      document.getElementById('shopList').style.display = 'grid';
      document.getElementById('chatContainer').style.display = 'none';
      selectedShop = null;
    }

    // Load messages from localStorage
    function loadMessages() {
      if (!selectedShop) return;
      const key = `messages_${selectedShop.id}`;
      messages = JSON.parse(localStorage.getItem(key) || '[]');
      renderMessages();
    }

    // Save messages to localStorage
    function saveMessages() {
      if (!selectedShop) return;
      const key = `messages_${selectedShop.id}`;
      localStorage.setItem(key, JSON.stringify(messages));
    }

    // Add message
    function addMessage(text, sender, type = 'text', fileData = null) {
      messages.push({ text, sender, timestamp: new Date().toISOString(), type, fileData });
      saveMessages();
      renderMessages();
    }

    // Render messages
    function renderMessages() {
      const chatMessages = document.getElementById('chatMessages');
      chatMessages.innerHTML = '';
      messages.forEach(msg => {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${msg.sender}`;
        if (msg.type === 'text') {
          messageDiv.textContent = msg.text;
        } else if (msg.type === 'image') {
          messageDiv.innerHTML = `<img src="${msg.fileData}" alt="Shared image">`;
        } else if (msg.type === 'file') {
          messageDiv.innerHTML = `<a href="${msg.fileData}" download class="file-link">${msg.text}</a>`;
        }
        chatMessages.appendChild(messageDiv);
      });
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Send message
    function sendMessage() {
      const input = document.getElementById('messageInput');
      const text = input.value.trim();
      if (text && selectedShop) {
        addMessage(text, 'user');
        input.value = '';
        // Simulate shop response
        setTimeout(() => {
          const responses = [
            "Thank you for your message. We'll get back to you soon.",
            "We're reviewing your order details.",
            "Do you have any specific requirements?",
            "Great choice! We'll start working on it."
          ];
          const randomResponse = responses[Math.floor(Math.random() * responses.length)];
          addMessage(randomResponse, 'shop');
        }, 2000);
      }
    }

    // Handle file selection
    document.getElementById('fileInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file && selectedShop) {
        const reader = new FileReader();
        reader.onload = function(event) {
          if (file.type.startsWith('image/')) {
            addMessage(`Shared image: ${file.name}`, 'user', 'image', event.target.result);
          } else {
            addMessage(`Shared file: ${file.name}`, 'user', 'file', event.target.result);
          }
        };
        reader.readAsDataURL(file);
      }
    });

    // Start call
    function startCall() {
      alert(`Starting video call with ${selectedShop.name}... (This is a placeholder - real implementation would require WebRTC)`);
      // In a real app, this would initiate WebRTC call
    }

    // Handle enter key
    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    // Initialize
    loadShops();
  </script>
</body>
</html>
